"use strict";function t(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(s){if("default"!==s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}})),e.default=t,Object.freeze(e)}function e(t,e,s,i=null){let a=t.querySelector("."+e);if(!a){if(a=document.createElement("div"),a.classList.add(e),null!==i){const t=document.createTextNode(i);a.appendChild(t)}s.appendChild(a)}return a}function s(t,e,s){return t.style.setProperty(e,s)}function i(t,e){return t.classList.add(e)}function a(t,e){return t.classList.remove(e)}const n={selector:".hello-week",lang:"en",langFolder:"../dist/langs/",format:"DD/MM/YYYY",monthShort:!1,weekShort:!0,defaultDate:null,minDate:null,maxDate:null,disabledDaysOfWeek:null,disableDates:null,weekStart:0,timezoneOffset:(new Date).getTimezoneOffset(),daysSelected:null,daysHighlight:null,multiplePick:!1,disablePastDays:!1,todayHighlight:!0,range:!1,locked:!1,rtl:!1,nav:["◀","▶"],onLoad:()=>{},onNavigation:()=>{},onSelect:()=>{},onClear:()=>{}};function o(t,e){return Object.assign(e||n,t)}function h({timestamp:t,format:e,langs:s,timezoneOffset:i}){const a=function({date:t,timezoneOffset:e}){const s=t?new Date(t):new Date;return e=e||s.getTimezoneOffset(),s.setTime(s.getTime()+60*e*1e3),s}({date:t,timezoneOffset:i});return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("dd",a.getDate().toString())).replace("DD",(a.getDate()>9?a.getDate():"0"+a.getDate()).toString())).replace("mm",(a.getMonth()+1).toString())).replace("MMM",s.months[a.getMonth()])).replace("MM",(a.getMonth()+1>9?a.getMonth()+1:"0"+(a.getMonth()+1)).toString())).replace("mmm",s.monthsShort[a.getMonth()])).replace("yyyy",a.getFullYear().toString())).replace("YYYY",a.getFullYear().toString())).replace("YY",a.getFullYear().toString().substring(2))).replace("yy",a.getFullYear().toString().substring(2))}function l(t,e,s){return`${s}-${("0"+(e+1)).slice(-2)}-${("0"+t).slice(-2)}`}function r(t){if("object"==typeof t)return t.setHours(0,0,0,0);if(t&&(!isNaN(Number(t))||3!==t.split("-").length))throw new Error(`The date ${t} is not valid!`);return t||"string"==typeof t?new Date(t+"T00:00:00Z").getTime():(new Date).setHours(0,0,0,0)}function d(t){return null!==t&&Array.isArray(t)}function c(t,e){return Array.prototype.slice.call(t).indexOf(e)+1}const g={CALENDAR:"hello-week",MONTH:"month",DAY:"day",WEEK:"week",NAVIGATION:"navigation",PERIOD:"period",PREV:"prev",NEXT:"next",RTL:"rtl"},p={IS_HIGHLIGHT:"is-highlight",IS_SELECTED:"is-selected",IS_BEGIN_RANGE:"is-begin-range",IS_END_RANGE:"is-end-range",IS_DISABLED:"is-disabled",IS_TODAY:"is-today",IS_WEEKEND:"is-weekend"},D={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6};class m{constructor(s){if(this.calendar={navigation:void 0,period:void 0,prevMonth:void 0,nextMonth:void 0,week:void 0,month:void 0},this.intervalRange={begin:0,end:0},this.daysSelected=[],this.options=Object.assign({},o(s)),m.initOptions=Object.assign({},o(s)),this.selector="string"==typeof this.options.selector?document.querySelector(this.options.selector):this.options.selector,null===this.selector)throw new Error("You need to specify a selector!");var a;if(this.options.selector!==m.cssClasses.CALENDAR&&i(this.selector,m.cssClasses.CALENDAR),this.calendar.navigation=e(this.selector,m.cssClasses.NAVIGATION,this.selector),this.options.nav){const[t,s]=this.options.nav;this.calendar.prevMonth=e(this.selector,m.cssClasses.PREV,this.calendar.navigation,t),this.calendar.period=e(this.selector,m.cssClasses.PERIOD,this.calendar.navigation),this.calendar.nextMonth=e(this.selector,m.cssClasses.NEXT,this.calendar.navigation,s),this.calendar.prevMonth.addEventListener("click",(()=>{this.prev((()=>{}))})),this.calendar.nextMonth.addEventListener("click",(()=>{this.next((()=>{}))}))}else this.calendar.period=e(this.selector,m.cssClasses.PERIOD,this.calendar.navigation);this.calendar.week=e(this.selector,m.cssClasses.WEEK,this.selector),this.calendar.month=e(this.selector,m.cssClasses.MONTH,this.selector),this.options.rtl&&(i(this.calendar.week,m.cssClasses.RTL),i(this.calendar.month,m.cssClasses.RTL)),(a=this.options.langFolder+this.options.lang+".js",Promise.resolve().then((function(){return t(require(a))}))).then((t=>t)).then((t=>{this.langs=t.default})).then((()=>this.init()))}static get cssClasses(){return g}static get cssStates(){return p}static get daysWeek(){return D}destroy(){this.removeStatesClass(),this.selector.remove()}prev(t){const e=this.date.getMonth()-1;this.date.setMonth(e),this.update(),this.options.onNavigation.call(this),t&&t.call(this)}next(t){const e=this.date.getMonth()+1;this.date.setMonth(e),this.update(),this.options.onNavigation.call(this),t&&t.call(this)}update(){this.clearCalendar(),this.mounted()}reset(t,e){this.clearCalendar(),this.options=o(t,m.initOptions),this.init(e)}goToday(){this.date=new Date,this.date.setDate(1),this.update()}goToDate(t){this.date=new Date(t||this.todayDate),this.date.setDate(1),this.update()}getDays(){return this.daysSelected.map((t=>h({timestamp:t,format:this.options.format,langs:this.langs,timezoneOffset:this.options.timezoneOffset})))}getDaySelected(){return this.lastSelectedDay}getDaysHighlight(){return this.daysHighlight}getMonth(){return this.date.getMonth()+1}getYear(){return this.date.getFullYear()}setDaysHighlight(t){this.daysHighlight=[...this.daysHighlight,...t]}setMultiplePick(t){this.options.multiplePick=t}setDisablePastDays(t){this.options.disablePastDays=t}setTodayHighlight(t){this.options.todayHighlight=t}setRange(t){this.options.range=t}setLocked(t){this.options.locked=t}setMinDate(t){this.options.minDate=new Date(t),this.options.minDate.setHours(0,0,0,0),this.options.minDate.setDate(this.options.minDate.getDate()-1)}setMaxDate(t){this.options.maxDate=new Date(t),this.options.maxDate.setHours(0,0,0,0),this.options.maxDate.setDate(this.options.maxDate.getDate()+1)}init(t){if(this.daysHighlight=this.options.daysHighlight?this.options.daysHighlight:[],this.daysSelected=this.options.daysSelected?this.options.daysSelected:[],this.daysSelected.length>1&&!this.options.multiplePick)throw new Error(`There are ${this.daysSelected.length} dates selected, but the multiplePick option\n                is ${this.options.multiplePick}!`);this.todayDate=r(),this.date=new Date,this.defaultDate=new Date,this.options.defaultDate&&(this.date=new Date(this.options.defaultDate),this.defaultDate=new Date(this.options.defaultDate),this.defaultDate.setDate(this.defaultDate.getDate())),this.date.setDate(1),this.options.minDate&&this.setMinDate(this.options.minDate),this.options.maxDate&&this.setMaxDate(this.options.maxDate),this.mounted(),this.options.onLoad.call(this),t&&t.call(this)}selectDay(t){this.daysOfMonth=this.selector.querySelectorAll("."+m.cssClasses.MONTH+" ."+m.cssClasses.DAY),this.daysOfMonth.forEach((e=>{this.handleClickInteraction(e,t),this.options.range&&this.handleMouseInteraction(e)}))}getIntervalOfDates(t,e){const s=[];let i=t;const a=function(t){const e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e.getTime()};for(;i<=e;)s.push(h({timestamp:i,format:"YYYY-MM-DD",langs:this.langs,timezoneOffset:this.options.timezoneOffset})),i=a.call(i,1);return s}handleClickInteraction(t,e){t.addEventListener("click",(t=>{const s=c(this.daysOfMonth,t.target);var a,n;this.days[s].locked||(this.lastSelectedDay=this.days[s].timestamp,this.options.range||(this.options.multiplePick?(this.days[s].timestamp&&(this.daysSelected=this.daysSelected.filter((t=>r(t)!==this.lastSelectedDay))),this.days[s].isSelected||this.daysSelected.push(h({timestamp:this.lastSelectedDay,format:"YYYY-MM-DD",langs:this.langs,timezoneOffset:this.options.timezoneOffset}))):(this.days[s].locked||this.removeStatesClass(),this.daysSelected=[],this.daysSelected.push(h({timestamp:this.lastSelectedDay,format:"YYYY-MM-DD",langs:this.langs,timezoneOffset:this.options.timezoneOffset})))),a=t.target,n=m.cssStates.IS_SELECTED,a.classList.toggle(n),this.days[s].isSelected=!this.days[s].isSelected,this.options.range&&(this.intervalRange.begin&&this.intervalRange.end&&(this.intervalRange.begin=void 0,this.intervalRange.end=void 0,this.removeStatesClass()),this.intervalRange.begin&&!this.intervalRange.end&&(this.intervalRange.end=this.days[s].timestamp,this.daysSelected=this.getIntervalOfDates(this.intervalRange.begin,this.intervalRange.end),i(t.target,m.cssStates.IS_END_RANGE),this.intervalRange.begin>this.intervalRange.end&&(this.intervalRange.begin=void 0,this.intervalRange.end=void 0,this.removeStatesClass())),this.intervalRange.begin||(this.intervalRange.begin=this.days[s].timestamp),i(t.target,m.cssStates.IS_SELECTED)),this.options.onSelect.call(this),e&&e.call(this))}))}handleMouseInteraction(t){t.addEventListener("mouseover",(t=>{const e=c(this.daysOfMonth,t.target);if(!(!this.intervalRange.begin||this.intervalRange.begin&&this.intervalRange.end)){this.removeStatesClass();for(let t=1;t<=Object.keys(this.days).length;t++)this.days[t].isSelected=!1,this.days[e].timestamp>=this.intervalRange.begin&&this.days[t].timestamp>=this.intervalRange.begin&&this.days[t].timestamp<=this.days[e].timestamp&&(i(this.days[t].element,m.cssStates.IS_SELECTED),this.days[t].timestamp===this.intervalRange.begin&&i(this.days[t].element,m.cssStates.IS_BEGIN_RANGE))}}))}creatWeek(t){const e=document.createElement("span");i(e,m.cssClasses.DAY),e.textContent=t,this.calendar.week.appendChild(e)}createMonth(){const t=this.date.getMonth();for(;this.date.getMonth()===t;)this.createDay(this.date),this.date.setDate(this.date.getDate()+1);this.date.setMonth(this.date.getMonth()-1),this.selectDay()}createDay(t){const e=t.getDate(),a=t.getDay(),n=document.createElement("div"),o={day:e,timestamp:r(l(t.getDate(),t.getMonth(),t.getFullYear())),isWeekend:!1,locked:!1,isToday:!1,isSelected:!1,isHighlight:!1,element:void 0};this.days=this.days||[],n.textContent=o.day.toString(),i(n,m.cssClasses.DAY),1===o.day&&(this.options.weekStart===m.daysWeek.SUNDAY?s(n,this.options.rtl?"margin-right":"margin-left",a*(100/Object.keys(m.daysWeek).length)+"%"):a===m.daysWeek.SUNDAY?s(n,this.options.rtl?"margin-right":"margin-left",(Object.keys(m.daysWeek).length-this.options.weekStart)*(100/Object.keys(m.daysWeek).length)+"%"):s(n,this.options.rtl?"margin-right":"margin-left",(a-1)*(100/Object.keys(m.daysWeek).length)+"%")),a!==m.daysWeek.SUNDAY&&a!==m.daysWeek.SATURDAY||(i(n,m.cssStates.IS_WEEKEND),o.isWeekend=!0),(this.options.locked||this.options.disabledDaysOfWeek&&this.options.disabledDaysOfWeek.includes(a)||this.options.disablePastDays&&+this.date.setHours(0,0,0,0)<=+this.defaultDate.setHours(0,0,0,0)-1||this.options.minDate&&+this.options.minDate>=o.timestamp||this.options.maxDate&&+this.options.maxDate<=o.timestamp)&&(i(n,m.cssStates.IS_DISABLED),o.locked=!0),this.options.disableDates&&this.setDaysDisable(n,o),this.todayDate===o.timestamp&&this.options.todayHighlight&&(i(n,m.cssStates.IS_TODAY),o.isToday=!0),this.daysSelected.find((t=>{t!==o.timestamp&&r(t.toString())!==o.timestamp||(i(n,m.cssStates.IS_SELECTED),o.isSelected=!0)})),o.timestamp===this.intervalRange.begin&&i(n,m.cssStates.IS_BEGIN_RANGE),o.timestamp===this.intervalRange.end&&i(n,m.cssStates.IS_END_RANGE),this.daysHighlight&&this.setDayHighlight(n,o),this.calendar.month&&this.calendar.month.appendChild(n),o.element=n,this.days[o.day]=o}setDaysDisable(t,e){d(this.options.disableDates[0])?this.options.disableDates.forEach((s=>{e.timestamp>=r(s[0])&&e.timestamp<=r(s[1])&&(i(t,m.cssStates.IS_DISABLED),e.locked=!0)})):d(this.options.disableDates)&&this.options.disableDates.forEach((s=>{"string"==typeof s&&e.timestamp===r(s)&&(i(t,m.cssStates.IS_DISABLED),e.locked=!0)}))}setDayHighlight(t,e){for(const s in this.daysHighlight){if(d(this.daysHighlight[s].days[0]))return void this.daysHighlight[s].days.forEach((i=>{e.timestamp>=r(i[0])&&e.timestamp<=r(i[1])&&this.setStyleDayHighlight(t,+s,e)}));d(this.daysHighlight[s])&&this.daysHighlight[s].days.forEach((i=>{e.timestamp===r(i)&&this.setStyleDayHighlight(t,+s,e)}))}}setStyleDayHighlight(t,e,a){var n,o,h;i(t,m.cssStates.IS_HIGHLIGHT),this.daysHighlight[e].title&&(a.title=this.daysHighlight[e].title,n=t,o="data-title",h=this.daysHighlight[e].title,n.setAttribute(o,h)),this.daysHighlight[e].color&&s(t,"color",this.daysHighlight[e].color),this.daysHighlight[e].backgroundColor&&s(t,"background-color",this.daysHighlight[e].backgroundColor),a.isHighlight=!0}monthsAsString(t){return this.options.monthShort?this.langs.monthsShort[t]:this.langs.months[t]}weekAsString(t){return this.options.weekShort?this.langs.daysShort[t]:this.langs.days[t]}mounted(){const t=[];this.calendar.period&&(this.calendar.period.innerHTML=this.monthsAsString(this.date.getMonth())+" "+this.date.getFullYear()),this.calendar.week.textContent="";for(let e=this.options.weekStart;e<this.langs.daysShort.length;e++)t.push(e);for(let e=0;e<this.options.weekStart;e++)t.push(e);for(const e of t)this.creatWeek(this.weekAsString(e));this.createMonth()}clearCalendar(){this.calendar.month.textContent=""}removeStatesClass(){this.daysOfMonth.forEach(((t,e)=>{a(t,m.cssStates.IS_SELECTED),a(t,m.cssStates.IS_BEGIN_RANGE),a(t,m.cssStates.IS_END_RANGE),this.days[e+1].isSelected=!1}))}}module.exports=m;
