function t(t,e,s,i=null){let a=t.querySelector("."+e);if(!a){if(a=document.createElement("div"),a.classList.add(e),null!==i){const t=document.createTextNode(i);a.appendChild(t)}s.appendChild(a)}return a}function e(t,e,s){return t.style.setProperty(e,s)}function s(t,e){return t.classList.add(e)}function i(t,e){return t.classList.remove(e)}const a={selector:".hello-week",lang:"en",langFolder:"../dist/langs/",format:"DD/MM/YYYY",monthShort:!1,weekShort:!0,defaultDate:null,minDate:null,maxDate:null,disabledDaysOfWeek:null,disableDates:null,weekStart:0,timezoneOffset:(new Date).getTimezoneOffset(),daysSelected:null,daysHighlight:null,multiplePick:!1,disablePastDays:!1,todayHighlight:!0,range:!1,locked:!1,rtl:!1,nav:["◀","▶"],onLoad:()=>{},onNavigation:()=>{},onSelect:()=>{},onClear:()=>{}};function n(t,e){return Object.assign(e||a,t)}function h({timestamp:t,format:e,langs:s,timezoneOffset:i}){const a=function({date:t,timezoneOffset:e}){const s=t?new Date(t):new Date;return e=e||s.getTimezoneOffset(),s.setTime(s.getTime()+60*e*1e3),s}({date:t,timezoneOffset:i});return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("dd",a.getDate().toString())).replace("DD",(a.getDate()>9?a.getDate():"0"+a.getDate()).toString())).replace("mm",(a.getMonth()+1).toString())).replace("MMM",s.months[a.getMonth()])).replace("MM",(a.getMonth()+1>9?a.getMonth()+1:"0"+(a.getMonth()+1)).toString())).replace("mmm",s.monthsShort[a.getMonth()])).replace("yyyy",a.getFullYear().toString())).replace("YYYY",a.getFullYear().toString())).replace("YY",a.getFullYear().toString().substring(2))).replace("yy",a.getFullYear().toString().substring(2))}function o(t,e,s){return`${s}-${("0"+(e+1)).slice(-2)}-${("0"+t).slice(-2)}`}function l(t){if("object"==typeof t)return t.setHours(0,0,0,0);if(t&&(!isNaN(Number(t))||3!==t.split("-").length))throw new Error(`The date ${t} is not valid!`);return t||"string"==typeof t?new Date(t+"T00:00:00Z").getTime():(new Date).setHours(0,0,0,0)}function r(t){return null!==t&&Array.isArray(t)}function d(t,e){return Array.prototype.slice.call(t).indexOf(e)+1}const c={CALENDAR:"hello-week",MONTH:"month",DAY:"day",WEEK:"week",NAVIGATION:"navigation",PERIOD:"period",PREV:"prev",NEXT:"next",RTL:"rtl"},g={IS_HIGHLIGHT:"is-highlight",IS_SELECTED:"is-selected",IS_BEGIN_RANGE:"is-begin-range",IS_END_RANGE:"is-end-range",IS_DISABLED:"is-disabled",IS_TODAY:"is-today",IS_WEEKEND:"is-weekend"},p={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6};class D{constructor(e){if(this.calendar={navigation:void 0,period:void 0,prevMonth:void 0,nextMonth:void 0,week:void 0,month:void 0},this.intervalRange={begin:0,end:0},this.daysSelected=[],this.options=Object.assign({},n(e)),D.initOptions=Object.assign({},n(e)),this.selector="string"==typeof this.options.selector?document.querySelector(this.options.selector):this.options.selector,null===this.selector)throw new Error("You need to specify a selector!");if(this.options.selector!==D.cssClasses.CALENDAR&&s(this.selector,D.cssClasses.CALENDAR),this.calendar.navigation=t(this.selector,D.cssClasses.NAVIGATION,this.selector),this.options.nav){const[e,s]=this.options.nav;this.calendar.prevMonth=t(this.selector,D.cssClasses.PREV,this.calendar.navigation,e),this.calendar.period=t(this.selector,D.cssClasses.PERIOD,this.calendar.navigation),this.calendar.nextMonth=t(this.selector,D.cssClasses.NEXT,this.calendar.navigation,s),this.calendar.prevMonth.addEventListener("click",(()=>{this.prev((()=>{}))})),this.calendar.nextMonth.addEventListener("click",(()=>{this.next((()=>{}))}))}else this.calendar.period=t(this.selector,D.cssClasses.PERIOD,this.calendar.navigation);this.calendar.week=t(this.selector,D.cssClasses.WEEK,this.selector),this.calendar.month=t(this.selector,D.cssClasses.MONTH,this.selector),this.options.rtl&&(s(this.calendar.week,D.cssClasses.RTL),s(this.calendar.month,D.cssClasses.RTL)),import(this.options.langFolder+this.options.lang+".js").then((t=>t)).then((t=>{this.langs=t.default})).then((()=>this.init()))}static get cssClasses(){return c}static get cssStates(){return g}static get daysWeek(){return p}destroy(){this.removeStatesClass(),this.selector.remove()}prev(t){const e=this.date.getMonth()-1;this.date.setMonth(e),this.update(),this.options.onNavigation.call(this),t&&t.call(this)}next(t){const e=this.date.getMonth()+1;this.date.setMonth(e),this.update(),this.options.onNavigation.call(this),t&&t.call(this)}update(){this.clearCalendar(),this.mounted()}reset(t,e){this.clearCalendar(),this.options=n(t,D.initOptions),this.init(e)}goToday(){this.date=new Date,this.date.setDate(1),this.update()}goToDate(t){this.date=new Date(t||this.todayDate),this.date.setDate(1),this.update()}getDays(){return this.daysSelected.map((t=>h({timestamp:t,format:this.options.format,langs:this.langs,timezoneOffset:this.options.timezoneOffset})))}getDaySelected(){return this.lastSelectedDay}getDaysHighlight(){return this.daysHighlight}getMonth(){return this.date.getMonth()+1}getYear(){return this.date.getFullYear()}setDaysHighlight(t){this.daysHighlight=[...this.daysHighlight,...t]}setMultiplePick(t){this.options.multiplePick=t}setDisablePastDays(t){this.options.disablePastDays=t}setTodayHighlight(t){this.options.todayHighlight=t}setRange(t){this.options.range=t}setLocked(t){this.options.locked=t}setMinDate(t){this.options.minDate=new Date(t),this.options.minDate.setHours(0,0,0,0),this.options.minDate.setDate(this.options.minDate.getDate()-1)}setMaxDate(t){this.options.maxDate=new Date(t),this.options.maxDate.setHours(0,0,0,0),this.options.maxDate.setDate(this.options.maxDate.getDate()+1)}init(t){if(this.daysHighlight=this.options.daysHighlight?this.options.daysHighlight:[],this.daysSelected=this.options.daysSelected?this.options.daysSelected:[],this.daysSelected.length>1&&!this.options.multiplePick)throw new Error(`There are ${this.daysSelected.length} dates selected, but the multiplePick option\n                is ${this.options.multiplePick}!`);this.todayDate=l(),this.date=new Date,this.defaultDate=new Date,this.options.defaultDate&&(this.date=new Date(this.options.defaultDate),this.defaultDate=new Date(this.options.defaultDate),this.defaultDate.setDate(this.defaultDate.getDate())),this.date.setDate(1),this.options.minDate&&this.setMinDate(this.options.minDate),this.options.maxDate&&this.setMaxDate(this.options.maxDate),this.mounted(),this.options.onLoad.call(this),t&&t.call(this)}selectDay(t){this.daysOfMonth=this.selector.querySelectorAll("."+D.cssClasses.MONTH+" ."+D.cssClasses.DAY),this.daysOfMonth.forEach((e=>{this.handleClickInteraction(e,t),this.options.range&&this.handleMouseInteraction(e)}))}getIntervalOfDates(t,e){const s=[];let i=t;const a=function(t){const e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e.getTime()};for(;i<=e;)s.push(h({timestamp:i,format:"YYYY-MM-DD",langs:this.langs,timezoneOffset:this.options.timezoneOffset})),i=a.call(i,1);return s}handleClickInteraction(t,e){t.addEventListener("click",(t=>{const i=d(this.daysOfMonth,t.target);var a,n;this.days[i].locked||(this.lastSelectedDay=this.days[i].timestamp,this.options.range||(this.options.multiplePick?(this.days[i].timestamp&&(this.daysSelected=this.daysSelected.filter((t=>l(t)!==this.lastSelectedDay))),this.days[i].isSelected||this.daysSelected.push(h({timestamp:this.lastSelectedDay,format:"YYYY-MM-DD",langs:this.langs,timezoneOffset:this.options.timezoneOffset}))):(this.days[i].locked||this.removeStatesClass(),this.daysSelected=[],this.daysSelected.push(h({timestamp:this.lastSelectedDay,format:"YYYY-MM-DD",langs:this.langs,timezoneOffset:this.options.timezoneOffset})))),a=t.target,n=D.cssStates.IS_SELECTED,a.classList.toggle(n),this.days[i].isSelected=!this.days[i].isSelected,this.options.range&&(this.intervalRange.begin&&this.intervalRange.end&&(this.intervalRange.begin=void 0,this.intervalRange.end=void 0,this.removeStatesClass()),this.intervalRange.begin&&!this.intervalRange.end&&(this.intervalRange.end=this.days[i].timestamp,this.daysSelected=this.getIntervalOfDates(this.intervalRange.begin,this.intervalRange.end),s(t.target,D.cssStates.IS_END_RANGE),this.intervalRange.begin>this.intervalRange.end&&(this.intervalRange.begin=void 0,this.intervalRange.end=void 0,this.removeStatesClass())),this.intervalRange.begin||(this.intervalRange.begin=this.days[i].timestamp),s(t.target,D.cssStates.IS_SELECTED)),this.options.onSelect.call(this),e&&e.call(this))}))}handleMouseInteraction(t){t.addEventListener("mouseover",(t=>{const e=d(this.daysOfMonth,t.target);if(!(!this.intervalRange.begin||this.intervalRange.begin&&this.intervalRange.end)){this.removeStatesClass();for(let t=1;t<=Object.keys(this.days).length;t++)this.days[t].isSelected=!1,this.days[e].timestamp>=this.intervalRange.begin&&this.days[t].timestamp>=this.intervalRange.begin&&this.days[t].timestamp<=this.days[e].timestamp&&(s(this.days[t].element,D.cssStates.IS_SELECTED),this.days[t].timestamp===this.intervalRange.begin&&s(this.days[t].element,D.cssStates.IS_BEGIN_RANGE))}}))}creatWeek(t){const e=document.createElement("span");s(e,D.cssClasses.DAY),e.textContent=t,this.calendar.week.appendChild(e)}createMonth(){const t=this.date.getMonth();for(;this.date.getMonth()===t;)this.createDay(this.date),this.date.setDate(this.date.getDate()+1);this.date.setMonth(this.date.getMonth()-1),this.selectDay()}createDay(t){const i=t.getDate(),a=t.getDay(),n=document.createElement("div"),h={day:i,timestamp:l(o(t.getDate(),t.getMonth(),t.getFullYear())),isWeekend:!1,locked:!1,isToday:!1,isSelected:!1,isHighlight:!1,element:void 0};this.days=this.days||[],n.textContent=h.day.toString(),s(n,D.cssClasses.DAY),1===h.day&&(this.options.weekStart===D.daysWeek.SUNDAY?e(n,this.options.rtl?"margin-right":"margin-left",a*(100/Object.keys(D.daysWeek).length)+"%"):a===D.daysWeek.SUNDAY?e(n,this.options.rtl?"margin-right":"margin-left",(Object.keys(D.daysWeek).length-this.options.weekStart)*(100/Object.keys(D.daysWeek).length)+"%"):e(n,this.options.rtl?"margin-right":"margin-left",(a-1)*(100/Object.keys(D.daysWeek).length)+"%")),a!==D.daysWeek.SUNDAY&&a!==D.daysWeek.SATURDAY||(s(n,D.cssStates.IS_WEEKEND),h.isWeekend=!0),(this.options.locked||this.options.disabledDaysOfWeek&&this.options.disabledDaysOfWeek.includes(a)||this.options.disablePastDays&&+this.date.setHours(0,0,0,0)<=+this.defaultDate.setHours(0,0,0,0)-1||this.options.minDate&&+this.options.minDate>=h.timestamp||this.options.maxDate&&+this.options.maxDate<=h.timestamp)&&(s(n,D.cssStates.IS_DISABLED),h.locked=!0),this.options.disableDates&&this.setDaysDisable(n,h),this.todayDate===h.timestamp&&this.options.todayHighlight&&(s(n,D.cssStates.IS_TODAY),h.isToday=!0),this.daysSelected.find((t=>{t!==h.timestamp&&l(t.toString())!==h.timestamp||(s(n,D.cssStates.IS_SELECTED),h.isSelected=!0)})),h.timestamp===this.intervalRange.begin&&s(n,D.cssStates.IS_BEGIN_RANGE),h.timestamp===this.intervalRange.end&&s(n,D.cssStates.IS_END_RANGE),this.daysHighlight&&this.setDayHighlight(n,h),this.calendar.month&&this.calendar.month.appendChild(n),h.element=n,this.days[h.day]=h}setDaysDisable(t,e){r(this.options.disableDates[0])?this.options.disableDates.forEach((i=>{e.timestamp>=l(i[0])&&e.timestamp<=l(i[1])&&(s(t,D.cssStates.IS_DISABLED),e.locked=!0)})):r(this.options.disableDates)&&this.options.disableDates.forEach((i=>{"string"==typeof i&&e.timestamp===l(i)&&(s(t,D.cssStates.IS_DISABLED),e.locked=!0)}))}setDayHighlight(t,e){for(const s in this.daysHighlight){if(r(this.daysHighlight[s].days[0]))return void this.daysHighlight[s].days.forEach((i=>{e.timestamp>=l(i[0])&&e.timestamp<=l(i[1])&&this.setStyleDayHighlight(t,+s,e)}));r(this.daysHighlight[s])&&this.daysHighlight[s].days.forEach((i=>{e.timestamp===l(i)&&this.setStyleDayHighlight(t,+s,e)}))}}setStyleDayHighlight(t,i,a){var n,h,o;s(t,D.cssStates.IS_HIGHLIGHT),this.daysHighlight[i].title&&(a.title=this.daysHighlight[i].title,n=t,h="data-title",o=this.daysHighlight[i].title,n.setAttribute(h,o)),this.daysHighlight[i].color&&e(t,"color",this.daysHighlight[i].color),this.daysHighlight[i].backgroundColor&&e(t,"background-color",this.daysHighlight[i].backgroundColor),a.isHighlight=!0}monthsAsString(t){return this.options.monthShort?this.langs.monthsShort[t]:this.langs.months[t]}weekAsString(t){return this.options.weekShort?this.langs.daysShort[t]:this.langs.days[t]}mounted(){const t=[];this.calendar.period&&(this.calendar.period.innerHTML=this.monthsAsString(this.date.getMonth())+" "+this.date.getFullYear()),this.calendar.week.textContent="";for(let e=this.options.weekStart;e<this.langs.daysShort.length;e++)t.push(e);for(let e=0;e<this.options.weekStart;e++)t.push(e);for(const e of t)this.creatWeek(this.weekAsString(e));this.createMonth()}clearCalendar(){this.calendar.month.textContent=""}removeStatesClass(){this.daysOfMonth.forEach(((t,e)=>{i(t,D.cssStates.IS_SELECTED),i(t,D.cssStates.IS_BEGIN_RANGE),i(t,D.cssStates.IS_END_RANGE),this.days[e+1].isSelected=!1}))}}export{D as default};
